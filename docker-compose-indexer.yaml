services:
  indexer:
    build: ./js/indexer
    environment:
      - PROJECT_ID=$PROJECT_ID
      - POSTGRES_HOST=db
      - POSTGRES_DB_USER_PASSWORD=main
      - POSTGRES_DB_USER=main
      - TABLE_NAME=movies
      - POSTGRES_DB_NAME=fake-movies-db
      - APP_VERSION=v1
      - GOOGLE_APPLICATION_CREDENTIALS=/key.json
      - LOCATION=us-central1
      - LOCAL=true
    volumes:
      - ./.key.json:/key.json
      - ./dataset/:/dataset
    networks:
      - db-shared-network
networks:
  db-shared-network:
    external: true
 
  